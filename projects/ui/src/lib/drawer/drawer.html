<ng-template #drawerContent>
    <section
        data-bspk="drawer"
        [attr.data-no-portal]="modal ? null : true"
        [attr.data-persistent-placement]="modal ? null : placement"
        role="complementary">
        <div data-drawer-header [attr.data-drawer-close-only]="!header ? 'true' : null">
            @if (header) {
                <div txt="heading-h4" data-drawer-title>{{ header }}</div>
            }
            @if (closeButton) {
                <ui-button
                    label="close"
                    variant="tertiary"
                    [icon]="IconClose"
                    [iconOnly]="true"
                    (click)="emitClose()" />
            }
        </div>
        <ng-content></ng-content>
    </section>
</ng-template>

@if (modal) {
    <ui-dialog
        [open]="open"
        [placement]="placement"
        [showScrim]="true"
        [disableFocusTrap]="disableFocusTrap"
        (onClose)="emitClose()"
        [widthFull]="placement === 'bottom' || placement === 'top'">
        <ng-container *ngTemplateOutlet="drawerContent"></ng-container>
    </ui-dialog>
} @else {
    @if (open) {
        <ng-container *ngTemplateOutlet="drawerContent"></ng-container>
    }
}
